(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();let b;const N=new Uint8Array(16);function U(){if(!b&&(b=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!b))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(N)}const d=[];for(let t=0;t<256;++t)d.push((t+256).toString(16).slice(1));function O(t,e=0){return(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase()}const Y=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),D={randomUUID:Y};function $(t,e,s){if(D.randomUUID&&!e&&!t)return D.randomUUID();t=t||{};const o=t.random||(t.rng||U)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){s=s||0;for(let n=0;n<16;++n)e[s+n]=o[n];return e}return O(o)}const k=[{bgColor:"info",content:"created"},{bgColor:"success",content:"edited"},{bgColor:"danger",content:"deleted"}];function S({bgColor:t,content:e}){const s=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),i=document.createElement("button");i.classList.add("btn-close","btn-close-white","me-2","m-auto"),i.addEventListener("click",()=>{s.classList.replace("visible","hidden"),setTimeout(()=>{document.body.removeChild(s)},500)}),n.classList.add("toast-body"),n.textContent=`Successfully ${e} task`,o.classList.add("d-flex"),o.appendChild(n),o.appendChild(i),s.classList.add("custom-toast","hidden","toast","d-block",`text-bg-${t}`,"position-fixed","border-0","top-0","end-0","me-3","mt-3"),s.appendChild(o),document.body.appendChild(s),setTimeout(()=>{s.classList.replace("hidden","visible")},0),setTimeout(()=>{s.classList.contains("visible")&&(s.classList.replace("visible","hidden"),setTimeout(()=>{document.body.removeChild(s)},500))},3e3)}function I(t){const e={...t};return e.tasks.sort((s,o)=>Number(s.time>o.time)),e.dates.sort((s,o)=>Number(new Date(s).getTime()>new Date(o).getTime())),e}function E(t,e){localStorage.setItem(t,JSON.stringify(e));const s=JSON.parse(localStorage.getItem(t));P(I(s))}const M=t=>{const e=t.getUTCMonth()+1,s=t.getDate();return`${t.getUTCFullYear()}-${e}-${s}`},w=t=>{const e=("0"+t.getHours()).slice(-2),s=("0"+t.getMinutes()).slice(-2);return e+":"+s},j=t=>{const e=["January","February","March","April","May","June","July","August","September","October","November","December"],s=t.split("-");return s[1]=e[+s[1]-1],s.reverse().join(" ")},A=t=>{if(h===""){const e=u.tasks.filter(a=>a.id!==t),{dayMonthYear:s}=u.tasks.find(a=>a.id===t),o=e.some(a=>a.dayMonthYear===s);let n=[...u.dates];o||(n=n.filter(a=>a!==s)),E("TASKS_STORE",{dates:n,tasks:e}),C(),S(k[2])}},R=(t,e)=>{const s=t.split("-"),o=("0"+s[2]).slice(-2),n=("0"+s[1]).slice(-2);return`${s[0]}-${n}-${o}T${e}`},F=t=>{const e=r.title,s=r.description,o=r.datetime,n=r[3];if(h===""||h!==t){e.focus();const{title:i,description:a,dayMonthYear:c,time:l}=u.tasks.find(m=>m.id===t);n.classList.replace("btn-outline-primary","btn-outline-success"),x({id:t}),e.classList.contains("is-invalid")&&e.classList.remove("is-invalid"),s.classList.contains("is-invalid")&&s.classList.remove("is-invalid"),e.value=i,s.value=a,o.value=R(c,l)}else h===t&&(n.classList.replace("btn-outline-success","btn-outline-primary"),x({id:""}),r.reset());C()};function J(t,e){t.map(({id:s,description:o,title:n,time:i})=>{const a=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),m=document.createElement("h4"),g=document.createElement("p"),v=document.createElement("div"),y=document.createElement("button"),p=document.createElement("button"),T=document.createElement("span");y.classList.add("btn","btn-outline-danger"),y.textContent="Delete",y.addEventListener("click",()=>A(s)),p.classList.add("btn","btn-outline-warning"),p.textContent="Edit",p.addEventListener("click",()=>F(s)),T.classList.add("badge","bg-light","ms-auto","ms-sm-0","ms-md-auto","ms-lg-0","ms-xl-auto"),T.textContent=+i.split(":")[0]>11?i+" PM":i+" AM",v.classList.add("d-flex","align-items-center","gap-2","mt-auto","flex-wrap"),v.appendChild(y),v.appendChild(p),v.appendChild(T),m.classList.add("card-title"),m.textContent=n,g.classList.add("card-text"),g.textContent=o,l.classList.add("card-body","d-flex","flex-column"),l.appendChild(m),l.appendChild(g),l.appendChild(v),a.classList.add("col-12","col-sm-6","col-lg-4","p-0"),c.classList.add("card","m-1","text-white","bg-primary","bg-opacity-75"),c.style.height="96%",h===s&&c.classList.replace("bg-primary","bg-success"),h!==""&&y.classList.add("opacity-75"),c.appendChild(l),a.appendChild(c),e==null||e.appendChild(a)})}function C(){const t=document.getElementById("date-container");t.innerHTML="",u.dates.map(e=>{const s=document.createElement("div"),o=document.createElement("p"),n=document.createElement("div"),i=e.split(" ").join("-")+"-list";o.textContent=j(e),n.id=i,s.className="col-11 m-auto my-5 bg-opacity-25 bg-primary p-3",o.className="text-dark text-black-50 ps-4 pt-2 fw-bold",n.className="row m-auto justify-content-center",s.appendChild(o),s.appendChild(n),t.appendChild(s);const a=u.tasks.filter(c=>c.dayMonthYear===e);J(a,n)})}const B=(t,e)=>{t.classList.remove("is-invalid"),e.classList.remove("is-invalid"),t.value===""&&t.classList.add("is-invalid"),e.value===""&&e.classList.add("is-invalid")},K=t=>{t.preventDefault();const e=r.title,s=r.description,o=r.datetime,n=r[3];if(B(e,s),!(e.value===""||s.value==="")){if(h===""){const i=new Date(o.value),a=M(i),c={id:$(),title:e.value,description:s.value,time:w(i),dayMonthYear:a};let l=[...u.dates];u.dates.includes(a)||(l=[...u.dates,a]);const m={tasks:[...u.tasks,c],dates:l};E("TASKS_STORE",m),S(k[0])}else{const i=new Date(o.value),a=M(i),c=[...u.tasks];let l=[...u.dates];const m=c.findIndex(p=>p.id===h);c[m].description=s.value,c[m].title=e.value,c[m].dayMonthYear=a,c[m].time=w(i),l.includes(a)||(l=[...l,a]);const g=c.map(p=>p.dayMonthYear),v=l.filter(p=>g.includes(p));E("TASKS_STORE",{tasks:c,dates:v}),x({id:""}),n.classList.replace("btn-outline-success","btn-outline-primary"),S(k[1])}C(),r.reset()}},_=[{id:"1kjh91d-13j01jr-opl61gp",title:"Go to Murray show",description:"This night will be the best one ever, hahahha",time:"21:30",dayMonthYear:"2021-11-24"},{id:"1kjh91d-0gjxc97-e123sda",title:"Make tea for Nina",description:"Nina likes tea but she dont know make him self, so I am going to help to him :3",time:"11:30",dayMonthYear:"2021-11-24"}],V=["2021-11-24"],H={tasks:_,dates:V};let u=I(JSON.parse(localStorage.getItem("TASKS_STORE"))||H),h="";const r=document.getElementById("task-form"),f=r.title,L=r.description;r.addEventListener("submit",K);r.reset();C();function x({id:t}){h=t}function P(t){u=t}f.addEventListener("input",()=>{f.value===""?f.classList.add("is-invalid"):f.classList.remove("is-invalid")});L.addEventListener("input",()=>{L.value===""?L.classList.add("is-invalid"):L.classList.remove("is-invalid")});
